<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>voxblox: integrator_utils.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_fd8820c1c0c48c5c02bb3ad96d8f61eb.html">voxblox</a></li><li class="navelem"><a class="el" href="dir_9fb5266e1a8f6504ec54e5db7f9070c0.html">integrator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">integrator_utils.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="integrator__utils_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef VOXBLOX_INTEGRATOR_INTEGRATOR_UTILS_H_</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define VOXBLOX_INTEGRATOR_INTEGRATOR_UTILS_H_</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;array&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;atomic&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;glog/logging.h&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;Eigen/Core&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="block__hash_8h.html">voxblox/core/block_hash.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common_8h.html">voxblox/core/common.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="timing_8h.html">voxblox/utils/timing.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacevoxblox.html">voxblox</a> {</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="classvoxblox_1_1ThreadSafeIndex.html">   26</a></span>&#160;<span class="keyword">class </span><a class="code" href="classvoxblox_1_1ThreadSafeIndex.html">ThreadSafeIndex</a> {</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  EIGEN_MAKE_ALIGNED_OPERATOR_NEW</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classvoxblox_1_1ThreadSafeIndex.html#abcfc877ca41a11940e76163b24ab2c2a">ThreadSafeIndex</a>(<span class="keywordtype">size_t</span> number_of_points);</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classvoxblox_1_1ThreadSafeIndex.html#a12c3c2de23e7debf21e4ad028ded63d5">getNextIndex</a>(<span class="keywordtype">size_t</span>* idx);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classvoxblox_1_1ThreadSafeIndex.html#a1db87325961753ce6ee95455142a7e15">reset</a>();</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classvoxblox_1_1ThreadSafeIndex.html#a3f706f7be3892f41d3ff652ac5a5dd27">getMixedIndex</a>(<span class="keywordtype">size_t</span> base_idx);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="classvoxblox_1_1ThreadSafeIndex.html#a15b879e8bda32d6f47c2aca115cd3319">   40</a></span>&#160;  std::atomic&lt;size_t&gt; <a class="code" href="classvoxblox_1_1ThreadSafeIndex.html#a15b879e8bda32d6f47c2aca115cd3319">atomic_idx_</a>;</div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="classvoxblox_1_1ThreadSafeIndex.html#a6700785d8ec378f21649b3408220250c">   41</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="classvoxblox_1_1ThreadSafeIndex.html#a6700785d8ec378f21649b3408220250c">number_of_points_</a>;</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classvoxblox_1_1ThreadSafeIndex.html#a8d752bf26ffcb9d2b349013a750a602e">   42</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="classvoxblox_1_1ThreadSafeIndex.html#a8d752bf26ffcb9d2b349013a750a602e">number_of_groups_</a>;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classvoxblox_1_1ThreadSafeIndex.html#af35b015cbe7cdd62742811213fa33f1d">   45</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">size_t</span> <a class="code" href="classvoxblox_1_1ThreadSafeIndex.html#af35b015cbe7cdd62742811213fa33f1d">num_bits</a> = 10;</div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="classvoxblox_1_1ThreadSafeIndex.html#a6d0ff6f97274963a9d7fa974dcd15946">   46</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">size_t</span> <a class="code" href="classvoxblox_1_1ThreadSafeIndex.html#a6d0ff6f97274963a9d7fa974dcd15946">step_size_</a> = 1 &lt;&lt; <a class="code" href="classvoxblox_1_1ThreadSafeIndex.html#af35b015cbe7cdd62742811213fa33f1d">num_bits</a>;</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classvoxblox_1_1ThreadSafeIndex.html#a02a49204bf4c20575d7c1e7741cea0c1">   47</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">size_t</span> <a class="code" href="classvoxblox_1_1ThreadSafeIndex.html#a02a49204bf4c20575d7c1e7741cea0c1">bit_mask_</a> = step_size_ - 1;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="classvoxblox_1_1ThreadSafeIndex.html#ab53f0a881e332c8b51630e04b41fcdf3">   54</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;size_t, step_size_&gt; <a class="code" href="classvoxblox_1_1ThreadSafeIndex.html#ab53f0a881e332c8b51630e04b41fcdf3">offset_lookup_</a>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;};</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="classvoxblox_1_1RayCaster.html">   63</a></span>&#160;<span class="keyword">class </span><a class="code" href="classvoxblox_1_1RayCaster.html">RayCaster</a> {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  EIGEN_MAKE_ALIGNED_OPERATOR_NEW</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="classvoxblox_1_1RayCaster.html">RayCaster</a>(<span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a>&amp; origin, <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a>&amp; point_G,</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> is_clearing_ray, <span class="keyword">const</span> <span class="keywordtype">bool</span> voxel_carving_enabled,</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a69a49f8f7c4d44b7d31daab36e4bc7dc">FloatingPoint</a> max_ray_length_m,</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a69a49f8f7c4d44b7d31daab36e4bc7dc">FloatingPoint</a> voxel_size_inv,</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a69a49f8f7c4d44b7d31daab36e4bc7dc">FloatingPoint</a> truncation_distance,</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> cast_from_origin = <span class="keyword">true</span>);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  RayCaster(<span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a>&amp; start_scaled, <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a>&amp; end_scaled);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordtype">bool</span> nextRayIndex(<a class="code" href="namespacevoxblox.html#a90a20ae2cdcb1348bf069a0b7fd99317">GlobalIndex</a>* ray_index);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordtype">void</span> setupRayCaster(<span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a>&amp; start_scaled, <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a>&amp; end_scaled);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="classvoxblox_1_1RayCaster.html#abeb345404c037a6c6a0ab163fc919b83">   82</a></span>&#160;  <a class="code" href="namespacevoxblox.html#af6a4fe064648e8aac09234f4eba5c5c3">Ray</a> <a class="code" href="classvoxblox_1_1RayCaster.html#abeb345404c037a6c6a0ab163fc919b83">t_to_next_boundary_</a>;</div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="classvoxblox_1_1RayCaster.html#a8a127d20b4099067e5831468c9484393">   83</a></span>&#160;  <a class="code" href="namespacevoxblox.html#a90a20ae2cdcb1348bf069a0b7fd99317">GlobalIndex</a> <a class="code" href="classvoxblox_1_1RayCaster.html#a8a127d20b4099067e5831468c9484393">curr_index_</a>;</div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="classvoxblox_1_1RayCaster.html#a2d4843419df63b16976fbab438453896">   84</a></span>&#160;  <a class="code" href="namespacevoxblox.html#a794bd216af900357ceba0726d1abd2c5">AnyIndex</a> <a class="code" href="classvoxblox_1_1RayCaster.html#a2d4843419df63b16976fbab438453896">ray_step_signs_</a>;</div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="classvoxblox_1_1RayCaster.html#a678a7235d77523f1e490e57fa934426a">   85</a></span>&#160;  <a class="code" href="namespacevoxblox.html#af6a4fe064648e8aac09234f4eba5c5c3">Ray</a> <a class="code" href="classvoxblox_1_1RayCaster.html#a678a7235d77523f1e490e57fa934426a">t_step_size_</a>;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classvoxblox_1_1RayCaster.html#aec245241853f44e54fe0dc80cf6e4ddb">   87</a></span>&#160;  uint <a class="code" href="classvoxblox_1_1RayCaster.html#aec245241853f44e54fe0dc80cf6e4ddb">ray_length_in_steps_</a>;</div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classvoxblox_1_1RayCaster.html#a339f9cb01d1da3081fbceec291199018">   88</a></span>&#160;  uint <a class="code" href="classvoxblox_1_1RayCaster.html#a339f9cb01d1da3081fbceec291199018">current_step_</a>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;};</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="namespacevoxblox.html#a970df089c955a010413599b7d1c2a590">   96</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacevoxblox.html#a970df089c955a010413599b7d1c2a590">castRay</a>(<span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a>&amp; start_scaled, <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a>&amp; end_scaled,</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                    <a class="code" href="namespacevoxblox.html#a3d118b2e8e58dfcbb55df45ecb336ce3">AlignedVector&lt;GlobalIndex&gt;</a>* indices) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  CHECK_NOTNULL(indices);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="classvoxblox_1_1RayCaster.html">RayCaster</a> ray_caster(start_scaled, end_scaled);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="namespacevoxblox.html#a90a20ae2cdcb1348bf069a0b7fd99317">GlobalIndex</a> ray_index;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">while</span> (ray_caster.<a class="code" href="classvoxblox_1_1RayCaster.html#a4cedcc3ff2da1ca9343d1f8932a7ab02">nextRayIndex</a>(&amp;ray_index)) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    indices-&gt;push_back(ray_index);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="namespacevoxblox.html#aaaa806c2b7fd4d96d75a0f1742a28fcc">  112</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacevoxblox.html#aaaa806c2b7fd4d96d75a0f1742a28fcc">getHierarchicalIndexAlongRay</a>(</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a>&amp; start, <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a>&amp; end, <span class="keywordtype">size_t</span> voxels_per_side,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="namespacevoxblox.html#a69a49f8f7c4d44b7d31daab36e4bc7dc">FloatingPoint</a> voxel_size, <a class="code" href="namespacevoxblox.html#a69a49f8f7c4d44b7d31daab36e4bc7dc">FloatingPoint</a> truncation_distance,</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">bool</span> voxel_carving_enabled, <a class="code" href="namespacevoxblox.html#ae910b5576546538a367a57feaa38e5d4">HierarchicalIndexMap</a>* hierarchical_idx_map) {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  hierarchical_idx_map-&gt;clear();</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="namespacevoxblox.html#a69a49f8f7c4d44b7d31daab36e4bc7dc">FloatingPoint</a> voxels_per_side_inv = 1.0 / voxels_per_side;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="namespacevoxblox.html#a69a49f8f7c4d44b7d31daab36e4bc7dc">FloatingPoint</a> voxel_size_inv = 1.0 / voxel_size;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#af6a4fe064648e8aac09234f4eba5c5c3">Ray</a> unit_ray = (end - start).normalized();</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a> ray_end = end + unit_ray * truncation_distance;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a> ray_start =</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      voxel_carving_enabled ? start : (end - unit_ray * truncation_distance);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a> start_scaled = ray_start * voxel_size_inv;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a> end_scaled = ray_end * voxel_size_inv;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="namespacevoxblox.html#a3d118b2e8e58dfcbb55df45ecb336ce3">AlignedVector&lt;GlobalIndex&gt;</a> global_voxel_index;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <a class="code" href="classvoxblox_1_1timing_1_1Timer.html">timing::Timer</a> cast_ray_timer(<span class="stringliteral">&quot;integrate/cast_ray&quot;</span>);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <a class="code" href="namespacevoxblox.html#a970df089c955a010413599b7d1c2a590">castRay</a>(start_scaled, end_scaled, &amp;global_voxel_index);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  cast_ray_timer.<a class="code" href="classvoxblox_1_1timing_1_1Timer.html#a21d39f20bc3dc4b7a8fbf86185577656">Stop</a>();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="classvoxblox_1_1timing_1_1Timer.html">timing::Timer</a> create_index_timer(<span class="stringliteral">&quot;integrate/create_hi_index&quot;</span>);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="namespacevoxblox.html#a90a20ae2cdcb1348bf069a0b7fd99317">GlobalIndex</a>&amp; global_voxel_idx : global_voxel_index) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="namespacevoxblox.html#a670cb0f354a5e86bc564b1b9375768b0">BlockIndex</a> block_idx = <a class="code" href="namespacevoxblox.html#a95704c0557cb0c32135b449203ebcdff">getBlockIndexFromGlobalVoxelIndex</a>(</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        global_voxel_idx, voxels_per_side_inv);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="namespacevoxblox.html#a2c9d5fca3f2bd513c7a9c6a036e19345">VoxelIndex</a> local_voxel_idx =</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="namespacevoxblox.html#aa4b3bc312f9c20be2e6c6d82ca5d3034">getLocalFromGlobalVoxelIndex</a>(global_voxel_idx, voxels_per_side);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (local_voxel_idx.x() &lt; 0) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      local_voxel_idx.x() += voxels_per_side;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (local_voxel_idx.y() &lt; 0) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      local_voxel_idx.y() += voxels_per_side;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span> (local_voxel_idx.z() &lt; 0) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      local_voxel_idx.z() += voxels_per_side;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    (*hierarchical_idx_map)[block_idx].push_back(local_voxel_idx);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  create_index_timer.<a class="code" href="classvoxblox_1_1timing_1_1Timer.html#a21d39f20bc3dc4b7a8fbf86185577656">Stop</a>();</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}  <span class="comment">// namespace voxblox</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">#endif  // VOXBLOX_INTEGRATOR_INTEGRATOR_UTILS_H_</span></div><div class="ttc" id="classvoxblox_1_1ThreadSafeIndex_html_a6d0ff6f97274963a9d7fa974dcd15946"><div class="ttname"><a href="classvoxblox_1_1ThreadSafeIndex.html#a6d0ff6f97274963a9d7fa974dcd15946">voxblox::ThreadSafeIndex::step_size_</a></div><div class="ttdeci">static constexpr size_t step_size_</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00046">integrator_utils.h:46</a></div></div>
<div class="ttc" id="classvoxblox_1_1ThreadSafeIndex_html_a02a49204bf4c20575d7c1e7741cea0c1"><div class="ttname"><a href="classvoxblox_1_1ThreadSafeIndex.html#a02a49204bf4c20575d7c1e7741cea0c1">voxblox::ThreadSafeIndex::bit_mask_</a></div><div class="ttdeci">static constexpr size_t bit_mask_</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00047">integrator_utils.h:47</a></div></div>
<div class="ttc" id="namespacevoxblox_html_a2c9d5fca3f2bd513c7a9c6a036e19345"><div class="ttname"><a href="namespacevoxblox.html#a2c9d5fca3f2bd513c7a9c6a036e19345">voxblox::VoxelIndex</a></div><div class="ttdeci">AnyIndex VoxelIndex</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00049">common.h:49</a></div></div>
<div class="ttc" id="namespacevoxblox_html_ae910b5576546538a367a57feaa38e5d4"><div class="ttname"><a href="namespacevoxblox.html#ae910b5576546538a367a57feaa38e5d4">voxblox::HierarchicalIndexMap</a></div><div class="ttdeci">AnyIndexHashMapType&lt; IndexVector &gt;::type HierarchicalIndexMap</div><div class="ttdef"><b>Definition:</b> <a href="block__hash_8h_source.html#l00047">block_hash.h:47</a></div></div>
<div class="ttc" id="namespacevoxblox_html_a670cb0f354a5e86bc564b1b9375768b0"><div class="ttname"><a href="namespacevoxblox.html#a670cb0f354a5e86bc564b1b9375768b0">voxblox::BlockIndex</a></div><div class="ttdeci">AnyIndex BlockIndex</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00050">common.h:50</a></div></div>
<div class="ttc" id="classvoxblox_1_1ThreadSafeIndex_html_a15b879e8bda32d6f47c2aca115cd3319"><div class="ttname"><a href="classvoxblox_1_1ThreadSafeIndex.html#a15b879e8bda32d6f47c2aca115cd3319">voxblox::ThreadSafeIndex::atomic_idx_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; atomic_idx_</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00040">integrator_utils.h:40</a></div></div>
<div class="ttc" id="namespacevoxblox_html"><div class="ttname"><a href="namespacevoxblox.html">voxblox</a></div><div class="ttdef"><b>Definition:</b> <a href="icp_8h_source.html#l00054">icp.h:54</a></div></div>
<div class="ttc" id="classvoxblox_1_1RayCaster_html_a4cedcc3ff2da1ca9343d1f8932a7ab02"><div class="ttname"><a href="classvoxblox_1_1RayCaster.html#a4cedcc3ff2da1ca9343d1f8932a7ab02">voxblox::RayCaster::nextRayIndex</a></div><div class="ttdeci">bool nextRayIndex(GlobalIndex *ray_index)</div><div class="ttdoc">returns false if ray terminates at ray_index, true otherwise </div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8cc_source.html#l00178">integrator_utils.cc:178</a></div></div>
<div class="ttc" id="classvoxblox_1_1RayCaster_html_a339f9cb01d1da3081fbceec291199018"><div class="ttname"><a href="classvoxblox_1_1RayCaster.html#a339f9cb01d1da3081fbceec291199018">voxblox::RayCaster::current_step_</a></div><div class="ttdeci">uint current_step_</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00088">integrator_utils.h:88</a></div></div>
<div class="ttc" id="namespacevoxblox_html_a794bd216af900357ceba0726d1abd2c5"><div class="ttname"><a href="namespacevoxblox.html#a794bd216af900357ceba0726d1abd2c5">voxblox::AnyIndex</a></div><div class="ttdeci">Eigen::Matrix&lt; IndexElement, 3, 1 &gt; AnyIndex</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00048">common.h:48</a></div></div>
<div class="ttc" id="classvoxblox_1_1ThreadSafeIndex_html_a1db87325961753ce6ee95455142a7e15"><div class="ttname"><a href="classvoxblox_1_1ThreadSafeIndex.html#a1db87325961753ce6ee95455142a7e15">voxblox::ThreadSafeIndex::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8cc_source.html#l00029">integrator_utils.cc:29</a></div></div>
<div class="ttc" id="block__hash_8h_html"><div class="ttname"><a href="block__hash_8h.html">block_hash.h</a></div></div>
<div class="ttc" id="classvoxblox_1_1RayCaster_html_a8a127d20b4099067e5831468c9484393"><div class="ttname"><a href="classvoxblox_1_1RayCaster.html#a8a127d20b4099067e5831468c9484393">voxblox::RayCaster::curr_index_</a></div><div class="ttdeci">GlobalIndex curr_index_</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00083">integrator_utils.h:83</a></div></div>
<div class="ttc" id="classvoxblox_1_1ThreadSafeIndex_html_abcfc877ca41a11940e76163b24ab2c2a"><div class="ttname"><a href="classvoxblox_1_1ThreadSafeIndex.html#abcfc877ca41a11940e76163b24ab2c2a">voxblox::ThreadSafeIndex::ThreadSafeIndex</a></div><div class="ttdeci">EIGEN_MAKE_ALIGNED_OPERATOR_NEW ThreadSafeIndex(size_t number_of_points)</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8cc_source.html#l00011">integrator_utils.cc:11</a></div></div>
<div class="ttc" id="classvoxblox_1_1ThreadSafeIndex_html_a6700785d8ec378f21649b3408220250c"><div class="ttname"><a href="classvoxblox_1_1ThreadSafeIndex.html#a6700785d8ec378f21649b3408220250c">voxblox::ThreadSafeIndex::number_of_points_</a></div><div class="ttdeci">const size_t number_of_points_</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00041">integrator_utils.h:41</a></div></div>
<div class="ttc" id="namespacevoxblox_html_af6a4fe064648e8aac09234f4eba5c5c3"><div class="ttname"><a href="namespacevoxblox.html#af6a4fe064648e8aac09234f4eba5c5c3">voxblox::Ray</a></div><div class="ttdeci">Eigen::Matrix&lt; FloatingPoint, 3, 1 &gt; Ray</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00046">common.h:46</a></div></div>
<div class="ttc" id="classvoxblox_1_1RayCaster_html"><div class="ttname"><a href="classvoxblox_1_1RayCaster.html">voxblox::RayCaster</a></div><div class="ttdoc">Generates the indexes of all voxels a given ray will pass through. </div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00063">integrator_utils.h:63</a></div></div>
<div class="ttc" id="namespacevoxblox_html_a90a20ae2cdcb1348bf069a0b7fd99317"><div class="ttname"><a href="namespacevoxblox.html#a90a20ae2cdcb1348bf069a0b7fd99317">voxblox::GlobalIndex</a></div><div class="ttdeci">LongIndex GlobalIndex</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00054">common.h:54</a></div></div>
<div class="ttc" id="namespacevoxblox_html_a69a49f8f7c4d44b7d31daab36e4bc7dc"><div class="ttname"><a href="namespacevoxblox.html#a69a49f8f7c4d44b7d31daab36e4bc7dc">voxblox::FloatingPoint</a></div><div class="ttdeci">float FloatingPoint</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00041">common.h:41</a></div></div>
<div class="ttc" id="namespacevoxblox_html_a95704c0557cb0c32135b449203ebcdff"><div class="ttname"><a href="namespacevoxblox.html#a95704c0557cb0c32135b449203ebcdff">voxblox::getBlockIndexFromGlobalVoxelIndex</a></div><div class="ttdeci">BlockIndex getBlockIndexFromGlobalVoxelIndex(const GlobalIndex &amp;global_voxel_idx, FloatingPoint voxels_per_side_inv)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00218">common.h:218</a></div></div>
<div class="ttc" id="classvoxblox_1_1RayCaster_html_a2d4843419df63b16976fbab438453896"><div class="ttname"><a href="classvoxblox_1_1RayCaster.html#a2d4843419df63b16976fbab438453896">voxblox::RayCaster::ray_step_signs_</a></div><div class="ttdeci">AnyIndex ray_step_signs_</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00084">integrator_utils.h:84</a></div></div>
<div class="ttc" id="classvoxblox_1_1ThreadSafeIndex_html_a12c3c2de23e7debf21e4ad028ded63d5"><div class="ttname"><a href="classvoxblox_1_1ThreadSafeIndex.html#a12c3c2de23e7debf21e4ad028ded63d5">voxblox::ThreadSafeIndex::getNextIndex</a></div><div class="ttdeci">bool getNextIndex(size_t *idx)</div><div class="ttdoc">returns true if index is valid, false otherwise </div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8cc_source.html#l00017">integrator_utils.cc:17</a></div></div>
<div class="ttc" id="classvoxblox_1_1RayCaster_html_a678a7235d77523f1e490e57fa934426a"><div class="ttname"><a href="classvoxblox_1_1RayCaster.html#a678a7235d77523f1e490e57fa934426a">voxblox::RayCaster::t_step_size_</a></div><div class="ttdeci">Ray t_step_size_</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00085">integrator_utils.h:85</a></div></div>
<div class="ttc" id="namespacevoxblox_html_a970df089c955a010413599b7d1c2a590"><div class="ttname"><a href="namespacevoxblox.html#a970df089c955a010413599b7d1c2a590">voxblox::castRay</a></div><div class="ttdeci">void castRay(const Point &amp;start_scaled, const Point &amp;end_scaled, AlignedVector&lt; GlobalIndex &gt; *indices)</div><div class="ttdoc">This function assumes PRE-SCALED coordinates, where one unit = one voxel size. </div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00096">integrator_utils.h:96</a></div></div>
<div class="ttc" id="classvoxblox_1_1ThreadSafeIndex_html_a8d752bf26ffcb9d2b349013a750a602e"><div class="ttname"><a href="classvoxblox_1_1ThreadSafeIndex.html#a8d752bf26ffcb9d2b349013a750a602e">voxblox::ThreadSafeIndex::number_of_groups_</a></div><div class="ttdeci">const size_t number_of_groups_</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00042">integrator_utils.h:42</a></div></div>
<div class="ttc" id="classvoxblox_1_1RayCaster_html_aec245241853f44e54fe0dc80cf6e4ddb"><div class="ttname"><a href="classvoxblox_1_1RayCaster.html#aec245241853f44e54fe0dc80cf6e4ddb">voxblox::RayCaster::ray_length_in_steps_</a></div><div class="ttdeci">uint ray_length_in_steps_</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00087">integrator_utils.h:87</a></div></div>
<div class="ttc" id="namespacevoxblox_html_aaaa806c2b7fd4d96d75a0f1742a28fcc"><div class="ttname"><a href="namespacevoxblox.html#aaaa806c2b7fd4d96d75a0f1742a28fcc">voxblox::getHierarchicalIndexAlongRay</a></div><div class="ttdeci">void getHierarchicalIndexAlongRay(const Point &amp;start, const Point &amp;end, size_t voxels_per_side, FloatingPoint voxel_size, FloatingPoint truncation_distance, bool voxel_carving_enabled, HierarchicalIndexMap *hierarchical_idx_map)</div><div class="ttdoc">Takes start and end in WORLD COORDINATES, does all pre-scaling and sorting into hierarhical index...</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00112">integrator_utils.h:112</a></div></div>
<div class="ttc" id="classvoxblox_1_1ThreadSafeIndex_html_a3f706f7be3892f41d3ff652ac5a5dd27"><div class="ttname"><a href="classvoxblox_1_1ThreadSafeIndex.html#a3f706f7be3892f41d3ff652ac5a5dd27">voxblox::ThreadSafeIndex::getMixedIndex</a></div><div class="ttdeci">size_t getMixedIndex(size_t base_idx)</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8cc_source.html#l00031">integrator_utils.cc:31</a></div></div>
<div class="ttc" id="namespacevoxblox_html_a0c9f3cab2910024e06fc5bfe9adb99b9"><div class="ttname"><a href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">voxblox::Point</a></div><div class="ttdeci">Eigen::Matrix&lt; FloatingPoint, 3, 1 &gt; Point</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00045">common.h:45</a></div></div>
<div class="ttc" id="classvoxblox_1_1ThreadSafeIndex_html_af35b015cbe7cdd62742811213fa33f1d"><div class="ttname"><a href="classvoxblox_1_1ThreadSafeIndex.html#af35b015cbe7cdd62742811213fa33f1d">voxblox::ThreadSafeIndex::num_bits</a></div><div class="ttdeci">static constexpr size_t num_bits</div><div class="ttdoc">1024 bins </div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00045">integrator_utils.h:45</a></div></div>
<div class="ttc" id="classvoxblox_1_1timing_1_1Timer_html_a21d39f20bc3dc4b7a8fbf86185577656"><div class="ttname"><a href="classvoxblox_1_1timing_1_1Timer.html#a21d39f20bc3dc4b7a8fbf86185577656">voxblox::timing::Timer::Stop</a></div><div class="ttdeci">void Stop()</div><div class="ttdef"><b>Definition:</b> <a href="timing_8cc_source.html#l00097">timing.cc:97</a></div></div>
<div class="ttc" id="common_8h_html"><div class="ttname"><a href="common_8h.html">common.h</a></div></div>
<div class="ttc" id="classvoxblox_1_1RayCaster_html_abeb345404c037a6c6a0ab163fc919b83"><div class="ttname"><a href="classvoxblox_1_1RayCaster.html#abeb345404c037a6c6a0ab163fc919b83">voxblox::RayCaster::t_to_next_boundary_</a></div><div class="ttdeci">Ray t_to_next_boundary_</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00082">integrator_utils.h:82</a></div></div>
<div class="ttc" id="namespacevoxblox_html_aa4b3bc312f9c20be2e6c6d82ca5d3034"><div class="ttname"><a href="namespacevoxblox.html#aa4b3bc312f9c20be2e6c6d82ca5d3034">voxblox::getLocalFromGlobalVoxelIndex</a></div><div class="ttdeci">VoxelIndex getLocalFromGlobalVoxelIndex(const GlobalIndex &amp;global_voxel_idx, const int voxels_per_side)</div><div class="ttdoc">Converts from a global voxel index to the index inside a block. </div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00236">common.h:236</a></div></div>
<div class="ttc" id="classvoxblox_1_1ThreadSafeIndex_html_ab53f0a881e332c8b51630e04b41fcdf3"><div class="ttname"><a href="classvoxblox_1_1ThreadSafeIndex.html#ab53f0a881e332c8b51630e04b41fcdf3">voxblox::ThreadSafeIndex::offset_lookup_</a></div><div class="ttdeci">static const std::array&lt; size_t, step_size_ &gt; offset_lookup_</div><div class="ttdoc">Lookup table for the order points in a group should be read in. </div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00054">integrator_utils.h:54</a></div></div>
<div class="ttc" id="timing_8h_html"><div class="ttname"><a href="timing_8h.html">timing.h</a></div></div>
<div class="ttc" id="namespacevoxblox_html_a3d118b2e8e58dfcbb55df45ecb336ce3"><div class="ttname"><a href="namespacevoxblox.html#a3d118b2e8e58dfcbb55df45ecb336ce3">voxblox::AlignedVector</a></div><div class="ttdeci">std::vector&lt; Type, Eigen::aligned_allocator&lt; Type &gt; &gt; AlignedVector</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00023">common.h:23</a></div></div>
<div class="ttc" id="classvoxblox_1_1ThreadSafeIndex_html"><div class="ttname"><a href="classvoxblox_1_1ThreadSafeIndex.html">voxblox::ThreadSafeIndex</a></div><div class="ttdoc">Small class that can be used by multiple threads that need mutually exclusive indexes to the same arr...</div><div class="ttdef"><b>Definition:</b> <a href="integrator__utils_8h_source.html#l00026">integrator_utils.h:26</a></div></div>
<div class="ttc" id="classvoxblox_1_1timing_1_1Timer_html"><div class="ttname"><a href="classvoxblox_1_1timing_1_1Timer.html">voxblox::timing::Timer</a></div><div class="ttdef"><b>Definition:</b> <a href="timing_8h_source.html#l00130">timing.h:130</a></div></div>
</div><!-- fragment --></div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/voxblox">voxblox</a><br />
Author(s): Helen Oleynikova <helen.oleynikova@mavt.ethz.ch>, Marius Fehr <marius.fehr@mavt.ethz.ch></br />
<small>autogenerated on Mon Nov 12 2018 18:18:02</small>
</div>
</body>
</html>
