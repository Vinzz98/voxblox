<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>voxblox: voxblox::ICP Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacevoxblox.html">voxblox</a></li><li class="navelem"><a class="el" href="classvoxblox_1_1ICP.html">ICP</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classvoxblox_1_1ICP-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">voxblox::ICP Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A class that performs point matching in an <a class="el" href="classvoxblox_1_1ICP.html" title="A class that performs point matching in an ICP like fashion to align a pointcloud with the existing T...">ICP</a> like fashion to align a pointcloud with the existing TSDF information.  
 <a href="classvoxblox_1_1ICP.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="icp_8h_source.html">icp.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvoxblox_1_1ICP_1_1Config.html">Config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains all the information needed to setup the <a class="el" href="classvoxblox_1_1ICP.html" title="A class that performs point matching in an ICP like fashion to align a pointcloud with the existing T...">ICP</a> class.  <a href="structvoxblox_1_1ICP_1_1Config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9d9c1772638692af68b09586ab241be6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#a9d9c1772638692af68b09586ab241be6">ICP</a> (const <a class="el" href="structvoxblox_1_1ICP_1_1Config.html">Config</a> &amp;config)</td></tr>
<tr class="memdesc:a9d9c1772638692af68b09586ab241be6"><td class="mdescLeft">&#160;</td><td class="mdescRight">A normal member taking two arguments and returning an integer value.  <a href="#a9d9c1772638692af68b09586ab241be6">More...</a><br /></td></tr>
<tr class="separator:a9d9c1772638692af68b09586ab241be6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acedd7766d1f2c78a20793c5fadd3aeeb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#acedd7766d1f2c78a20793c5fadd3aeeb">refiningRollPitch</a> ()</td></tr>
<tr class="separator:acedd7766d1f2c78a20793c5fadd3aeeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75cd6e495c701a96c0ee356174255df5"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#a75cd6e495c701a96c0ee356174255df5">runICP</a> (const <a class="el" href="classvoxblox_1_1Layer.html">Layer</a>&lt; <a class="el" href="structvoxblox_1_1TsdfVoxel.html">TsdfVoxel</a> &gt; &amp;tsdf_layer, const <a class="el" href="namespacevoxblox.html#a8f42fdb3f79930238600446e3b68df6b">Pointcloud</a> &amp;points, const <a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> &amp;inital_T_tsdf_sensor, <a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> *refined_T_tsdf_sensor, const unsigned seed=std::chrono::system_clock::now() .time_since_epoch() .count())</td></tr>
<tr class="memdesc:a75cd6e495c701a96c0ee356174255df5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the <a class="el" href="classvoxblox_1_1ICP.html" title="A class that performs point matching in an ICP like fashion to align a pointcloud with the existing T...">ICP</a> method to align the points with the tsdf_layer.  <a href="#a75cd6e495c701a96c0ee356174255df5">More...</a><br /></td></tr>
<tr class="separator:a75cd6e495c701a96c0ee356174255df5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:ad27cb4640314b8b31b95e358240780f4"><td class="memItemLeft" align="right" valign="top">typedef Transformation::Vector6&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#ad27cb4640314b8b31b95e358240780f4">Vector6</a></td></tr>
<tr class="separator:ad27cb4640314b8b31b95e358240780f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a991134a6e8e0044036e0577c30364d2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#a991134a6e8e0044036e0577c30364d2a">matchPoints</a> (const <a class="el" href="namespacevoxblox.html#a8f42fdb3f79930238600446e3b68df6b">Pointcloud</a> &amp;points, const size_t start_idx, const <a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> &amp;T_tsdf_sensor, <a class="el" href="namespacevoxblox.html#a3eb955f870d000a19c0ff7092ebd7e58">PointsMatrix</a> *src, <a class="el" href="namespacevoxblox.html#a3eb955f870d000a19c0ff7092ebd7e58">PointsMatrix</a> *tgt, <a class="el" href="classvoxblox_1_1ICP.html#ad27cb4640314b8b31b95e358240780f4">Vector6</a> *info_vector)</td></tr>
<tr class="memdesc:a991134a6e8e0044036e0577c30364d2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a set of matching points from a pointcloud and tsdf layer.  <a href="#a991134a6e8e0044036e0577c30364d2a">More...</a><br /></td></tr>
<tr class="separator:a991134a6e8e0044036e0577c30364d2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0434337d619aac5ca817f6400c7c916b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#a0434337d619aac5ca817f6400c7c916b">runThread</a> (const <a class="el" href="namespacevoxblox.html#a8f42fdb3f79930238600446e3b68df6b">Pointcloud</a> &amp;points, <a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> *current_T_tsdf_sensor, <a class="el" href="classvoxblox_1_1ICP.html#ad27cb4640314b8b31b95e358240780f4">Vector6</a> *base_info_vector, size_t *num_updates)</td></tr>
<tr class="memdesc:a0434337d619aac5ca817f6400c7c916b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A thread safe function that will continually process points until the alignment is finished.  <a href="#a0434337d619aac5ca817f6400c7c916b">More...</a><br /></td></tr>
<tr class="separator:a0434337d619aac5ca817f6400c7c916b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09f1d2cbe434545504f673a1c52f156b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#a09f1d2cbe434545504f673a1c52f156b">stepICP</a> (const <a class="el" href="namespacevoxblox.html#a8f42fdb3f79930238600446e3b68df6b">Pointcloud</a> &amp;points, const size_t start_idx, const <a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> &amp;inital_T_tsdf_sensor, <a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> *refined_T_tsdf_sensor, <a class="el" href="classvoxblox_1_1ICP.html#ad27cb4640314b8b31b95e358240780f4">Vector6</a> *info_vector)</td></tr>
<tr class="memdesc:a09f1d2cbe434545504f673a1c52f156b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs one mini batch step and gives the refined transform.  <a href="#a09f1d2cbe434545504f673a1c52f156b">More...</a><br /></td></tr>
<tr class="separator:a09f1d2cbe434545504f673a1c52f156b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a094e52a6c3f38bc160aaedf2d0bd6f3b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#a094e52a6c3f38bc160aaedf2d0bd6f3b">addNormalizedPointInfo</a> (const <a class="el" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a> &amp;point, const <a class="el" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a> &amp;normalized_point_normal, <a class="el" href="classvoxblox_1_1ICP.html#ad27cb4640314b8b31b95e358240780f4">Vector6</a> *info_vector)</td></tr>
<tr class="memdesc:a094e52a6c3f38bc160aaedf2d0bd6f3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A measure that vaguely indicates the amount of information a point contributes to the alignment estimate.  <a href="#a094e52a6c3f38bc160aaedf2d0bd6f3b">More...</a><br /></td></tr>
<tr class="separator:a094e52a6c3f38bc160aaedf2d0bd6f3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29ea3ccb5e47effdd83572ec07cf3bc5"><td class="memTemplParams" colspan="2">template&lt;size_t dim&gt; </td></tr>
<tr class="memitem:a29ea3ccb5e47effdd83572ec07cf3bc5"><td class="memTemplItemLeft" align="right" valign="top">static bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#a29ea3ccb5e47effdd83572ec07cf3bc5">getRotationFromMatchedPoints</a> (const <a class="el" href="namespacevoxblox.html#a3eb955f870d000a19c0ff7092ebd7e58">PointsMatrix</a> &amp;src_demean, const <a class="el" href="namespacevoxblox.html#a3eb955f870d000a19c0ff7092ebd7e58">PointsMatrix</a> &amp;tgt_demean, <a class="el" href="namespacevoxblox.html#a4aafaec012ca0688f8290e6223593c32">Rotation</a> *R_tgt_src)</td></tr>
<tr class="memdesc:a29ea3ccb5e47effdd83572ec07cf3bc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the rotation that will give the least mean-squared error in aligning two sets of matched points.  <a href="#a29ea3ccb5e47effdd83572ec07cf3bc5">More...</a><br /></td></tr>
<tr class="separator:a29ea3ccb5e47effdd83572ec07cf3bc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3e5106bf1ee9061831b38eb9a7f34a2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#ac3e5106bf1ee9061831b38eb9a7f34a2">getTransformFromMatchedPoints</a> (const <a class="el" href="namespacevoxblox.html#a3eb955f870d000a19c0ff7092ebd7e58">PointsMatrix</a> &amp;src, const <a class="el" href="namespacevoxblox.html#a3eb955f870d000a19c0ff7092ebd7e58">PointsMatrix</a> &amp;tgt, const bool refine_roll_pitch, <a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> *T_tsdf_sensor)</td></tr>
<tr class="memdesc:ac3e5106bf1ee9061831b38eb9a7f34a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds transform between a set of matching points that minimizes the least mean-squared error.  <a href="#ac3e5106bf1ee9061831b38eb9a7f34a2">More...</a><br /></td></tr>
<tr class="separator:ac3e5106bf1ee9061831b38eb9a7f34a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae328fdb3840d6ae2d1bb9a47b5ba989e"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#ae328fdb3840d6ae2d1bb9a47b5ba989e">atomic_idx_</a></td></tr>
<tr class="separator:ae328fdb3840d6ae2d1bb9a47b5ba989e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4abb529c88067235eee6f891fca349e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structvoxblox_1_1ICP_1_1Config.html">Config</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#a4abb529c88067235eee6f891fca349e4">config_</a></td></tr>
<tr class="separator:a4abb529c88067235eee6f891fca349e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c710fdd86c8c10082aca1dcfd10d4e4"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classvoxblox_1_1Interpolator.html">Interpolator</a>&lt; <a class="el" href="structvoxblox_1_1TsdfVoxel.html">TsdfVoxel</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#a3c710fdd86c8c10082aca1dcfd10d4e4">interpolator_</a></td></tr>
<tr class="separator:a3c710fdd86c8c10082aca1dcfd10d4e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1c649aed2102a9acd9a8e1a440da59a"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#ac1c649aed2102a9acd9a8e1a440da59a">mutex_</a></td></tr>
<tr class="separator:ac1c649aed2102a9acd9a8e1a440da59a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2468db50ac4423b92cba30bd06304b69"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacevoxblox.html#a69a49f8f7c4d44b7d31daab36e4bc7dc">FloatingPoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#a2468db50ac4423b92cba30bd06304b69">voxel_size_</a></td></tr>
<tr class="separator:a2468db50ac4423b92cba30bd06304b69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4876528307eda3873bb1516a3f2b081"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacevoxblox.html#a69a49f8f7c4d44b7d31daab36e4bc7dc">FloatingPoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvoxblox_1_1ICP.html#ac4876528307eda3873bb1516a3f2b081">voxel_size_inv_</a></td></tr>
<tr class="separator:ac4876528307eda3873bb1516a3f2b081"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class that performs point matching in an <a class="el" href="classvoxblox_1_1ICP.html" title="A class that performs point matching in an ICP like fashion to align a pointcloud with the existing T...">ICP</a> like fashion to align a pointcloud with the existing TSDF information. </p>
<p>Note the process is slightly different to traditional <a class="el" href="classvoxblox_1_1ICP.html" title="A class that performs point matching in an ICP like fashion to align a pointcloud with the existing T...">ICP</a>:<br />
1) A "mini batch" of points is selected and the transform that gives the minimum least squares error for their alignment is found.<br />
2) The "information" contained in this alignment is estimated and used to fuse this refined transform with the initial guess.<br />
3) The process is repeated with a new mini batch of points until all points in the pointcloud have been used.<br />
This scheme does not really iterate and uses the TSDF distances instead of building a kdtree. Both choices limit the capture region and so so assumes the initial guess is reasonably accurate. However, these limitations allow efficient correspondence estimation and parallelization, allowing efficient real time performance. </p>

<p class="definition">Definition at line <a class="el" href="icp_8h_source.html#l00071">71</a> of file <a class="el" href="icp_8h_source.html">icp.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ad27cb4640314b8b31b95e358240780f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad27cb4640314b8b31b95e358240780f4">&#9670;&nbsp;</a></span>Vector6</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef Transformation::Vector6 <a class="el" href="classvoxblox_1_1ICP.html#ad27cb4640314b8b31b95e358240780f4">voxblox::ICP::Vector6</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="icp_8h_source.html#l00125">125</a> of file <a class="el" href="icp_8h_source.html">icp.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9d9c1772638692af68b09586ab241be6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d9c1772638692af68b09586ab241be6">&#9670;&nbsp;</a></span>ICP()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">voxblox::ICP::ICP </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structvoxblox_1_1ICP_1_1Config.html">Config</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A normal member taking two arguments and returning an integer value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>struct holding all relevant <a class="el" href="classvoxblox_1_1ICP.html" title="A class that performs point matching in an ICP like fashion to align a pointcloud with the existing T...">ICP</a> parameters. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="icp_8cc_source.html#l00047">47</a> of file <a class="el" href="icp_8cc_source.html">icp.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a094e52a6c3f38bc160aaedf2d0bd6f3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a094e52a6c3f38bc160aaedf2d0bd6f3b">&#9670;&nbsp;</a></span>addNormalizedPointInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void voxblox::ICP::addNormalizedPointInfo </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a> &amp;&#160;</td>
          <td class="paramname"><em>point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacevoxblox.html#a0c9f3cab2910024e06fc5bfe9adb99b9">Point</a> &amp;&#160;</td>
          <td class="paramname"><em>normalized_point_normal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classvoxblox_1_1ICP.html#ad27cb4640314b8b31b95e358240780f4">Vector6</a> *&#160;</td>
          <td class="paramname"><em>info_vector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A measure that vaguely indicates the amount of information a point contributes to the alignment estimate. </p>
<p>The result can be taken as an approximation of the Hessian, "Normalized" as the uncertainty in the points is not used in its computation. Note this cannot be used as an absolute estimate of alignment quality as even highly self-similar environments will report sub-millimeter errors due to the baked in assumption that all correspondences are correct. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info_vector</td><td>vector representing the information over the 6-dof pose. The points information is added to the information existing in this vector. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="icp_8cc_source.html#l00079">79</a> of file <a class="el" href="icp_8cc_source.html">icp.cc</a>.</p>

</div>
</div>
<a id="a29ea3ccb5e47effdd83572ec07cf3bc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29ea3ccb5e47effdd83572ec07cf3bc5">&#9670;&nbsp;</a></span>getRotationFromMatchedPoints()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;size_t dim&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool voxblox::ICP::getRotationFromMatchedPoints </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacevoxblox.html#a3eb955f870d000a19c0ff7092ebd7e58">PointsMatrix</a> &amp;&#160;</td>
          <td class="paramname"><em>src_demean</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacevoxblox.html#a3eb955f870d000a19c0ff7092ebd7e58">PointsMatrix</a> &amp;&#160;</td>
          <td class="paramname"><em>tgt_demean</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacevoxblox.html#a4aafaec012ca0688f8290e6223593c32">Rotation</a> *&#160;</td>
          <td class="paramname"><em>R_tgt_src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the rotation that will give the least mean-squared error in aligning two sets of matched points. </p>
<p>Assumes the pointclouds have the same mean. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dim</td><td>dimensionality of the alignment. dim = 2 performs yaw only alignment, dim = 3 performs full 3 dof alignment, all other values are invalid. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a valid rotation matrix was calculated, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="icp_8h_source.html#l00137">137</a> of file <a class="el" href="icp_8h_source.html">icp.h</a>.</p>

</div>
</div>
<a id="ac3e5106bf1ee9061831b38eb9a7f34a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3e5106bf1ee9061831b38eb9a7f34a2">&#9670;&nbsp;</a></span>getTransformFromMatchedPoints()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool voxblox::ICP::getTransformFromMatchedPoints </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacevoxblox.html#a3eb955f870d000a19c0ff7092ebd7e58">PointsMatrix</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacevoxblox.html#a3eb955f870d000a19c0ff7092ebd7e58">PointsMatrix</a> &amp;&#160;</td>
          <td class="paramname"><em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>refine_roll_pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> *&#160;</td>
          <td class="paramname"><em>T_tsdf_sensor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds transform between a set of matching points that minimizes the least mean-squared error. </p>
<dl class="section return"><dt>Returns</dt><dd>true if T_tsdf_sensor was successfully estimated, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="icp_8cc_source.html#l00049">49</a> of file <a class="el" href="icp_8cc_source.html">icp.cc</a>.</p>

</div>
</div>
<a id="a991134a6e8e0044036e0577c30364d2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a991134a6e8e0044036e0577c30364d2a">&#9670;&nbsp;</a></span>matchPoints()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void voxblox::ICP::matchPoints </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacevoxblox.html#a8f42fdb3f79930238600446e3b68df6b">Pointcloud</a> &amp;&#160;</td>
          <td class="paramname"><em>points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>start_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> &amp;&#160;</td>
          <td class="paramname"><em>T_tsdf_sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacevoxblox.html#a3eb955f870d000a19c0ff7092ebd7e58">PointsMatrix</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacevoxblox.html#a3eb955f870d000a19c0ff7092ebd7e58">PointsMatrix</a> *&#160;</td>
          <td class="paramname"><em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classvoxblox_1_1ICP.html#ad27cb4640314b8b31b95e358240780f4">Vector6</a> *&#160;</td>
          <td class="paramname"><em>info_vector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates a set of matching points from a pointcloud and tsdf layer. </p>

<p class="definition">Definition at line <a class="el" href="icp_8cc_source.html#l00103">103</a> of file <a class="el" href="icp_8cc_source.html">icp.cc</a>.</p>

</div>
</div>
<a id="acedd7766d1f2c78a20793c5fadd3aeeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acedd7766d1f2c78a20793c5fadd3aeeb">&#9670;&nbsp;</a></span>refiningRollPitch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool voxblox::ICP::refiningRollPitch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="icp_8h_source.html#l00122">122</a> of file <a class="el" href="icp_8h_source.html">icp.h</a>.</p>

</div>
</div>
<a id="a75cd6e495c701a96c0ee356174255df5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75cd6e495c701a96c0ee356174255df5">&#9670;&nbsp;</a></span>runICP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t voxblox::ICP::runICP </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classvoxblox_1_1Layer.html">Layer</a>&lt; <a class="el" href="structvoxblox_1_1TsdfVoxel.html">TsdfVoxel</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>tsdf_layer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacevoxblox.html#a8f42fdb3f79930238600446e3b68df6b">Pointcloud</a> &amp;&#160;</td>
          <td class="paramname"><em>points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> &amp;&#160;</td>
          <td class="paramname"><em>inital_T_tsdf_sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> *&#160;</td>
          <td class="paramname"><em>refined_T_tsdf_sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>seed</em> = <code>std::chrono::system_clock::now()&#160;.time_since_epoch()&#160;.count()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs the <a class="el" href="classvoxblox_1_1ICP.html" title="A class that performs point matching in an ICP like fashion to align a pointcloud with the existing T...">ICP</a> method to align the points with the tsdf_layer. </p>
<dl class="section return"><dt>Returns</dt><dd>the number of mini batches that were successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="icp_8cc_source.html#l00223">223</a> of file <a class="el" href="icp_8cc_source.html">icp.cc</a>.</p>

</div>
</div>
<a id="a0434337d619aac5ca817f6400c7c916b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0434337d619aac5ca817f6400c7c916b">&#9670;&nbsp;</a></span>runThread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void voxblox::ICP::runThread </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacevoxblox.html#a8f42fdb3f79930238600446e3b68df6b">Pointcloud</a> &amp;&#160;</td>
          <td class="paramname"><em>points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> *&#160;</td>
          <td class="paramname"><em>current_T_tsdf_sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classvoxblox_1_1ICP.html#ad27cb4640314b8b31b95e358240780f4">Vector6</a> *&#160;</td>
          <td class="paramname"><em>base_info_vector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>num_updates</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A thread safe function that will continually process points until the alignment is finished. </p>
<p>Called by runICP. </p>

<p class="definition">Definition at line <a class="el" href="icp_8cc_source.html#l00179">179</a> of file <a class="el" href="icp_8cc_source.html">icp.cc</a>.</p>

</div>
</div>
<a id="a09f1d2cbe434545504f673a1c52f156b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09f1d2cbe434545504f673a1c52f156b">&#9670;&nbsp;</a></span>stepICP()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool voxblox::ICP::stepICP </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacevoxblox.html#a8f42fdb3f79930238600446e3b68df6b">Pointcloud</a> &amp;&#160;</td>
          <td class="paramname"><em>points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>start_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> &amp;&#160;</td>
          <td class="paramname"><em>inital_T_tsdf_sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacevoxblox.html#a8bdb2beab2744d6fc9608909add7eac8">Transformation</a> *&#160;</td>
          <td class="paramname"><em>refined_T_tsdf_sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classvoxblox_1_1ICP.html#ad27cb4640314b8b31b95e358240780f4">Vector6</a> *&#160;</td>
          <td class="paramname"><em>info_vector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs one mini batch step and gives the refined transform. </p>
<dl class="section return"><dt>Returns</dt><dd>true if a valid transform was generated </dd></dl>

<p class="definition">Definition at line <a class="el" href="icp_8cc_source.html#l00155">155</a> of file <a class="el" href="icp_8cc_source.html">icp.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ae328fdb3840d6ae2d1bb9a47b5ba989e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae328fdb3840d6ae2d1bb9a47b5ba989e">&#9670;&nbsp;</a></span>atomic_idx_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;size_t&gt; voxblox::ICP::atomic_idx_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="icp_8h_source.html#l00220">220</a> of file <a class="el" href="icp_8h_source.html">icp.h</a>.</p>

</div>
</div>
<a id="a4abb529c88067235eee6f891fca349e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4abb529c88067235eee6f891fca349e4">&#9670;&nbsp;</a></span>config_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvoxblox_1_1ICP_1_1Config.html">Config</a> voxblox::ICP::config_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="icp_8h_source.html#l00218">218</a> of file <a class="el" href="icp_8h_source.html">icp.h</a>.</p>

</div>
</div>
<a id="a3c710fdd86c8c10082aca1dcfd10d4e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c710fdd86c8c10082aca1dcfd10d4e4">&#9670;&nbsp;</a></span>interpolator_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classvoxblox_1_1Interpolator.html">Interpolator</a>&lt;<a class="el" href="structvoxblox_1_1TsdfVoxel.html">TsdfVoxel</a>&gt; &gt; voxblox::ICP::interpolator_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="icp_8h_source.html#l00225">225</a> of file <a class="el" href="icp_8h_source.html">icp.h</a>.</p>

</div>
</div>
<a id="ac1c649aed2102a9acd9a8e1a440da59a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1c649aed2102a9acd9a8e1a440da59a">&#9670;&nbsp;</a></span>mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex voxblox::ICP::mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="icp_8h_source.html#l00221">221</a> of file <a class="el" href="icp_8h_source.html">icp.h</a>.</p>

</div>
</div>
<a id="a2468db50ac4423b92cba30bd06304b69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2468db50ac4423b92cba30bd06304b69">&#9670;&nbsp;</a></span>voxel_size_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacevoxblox.html#a69a49f8f7c4d44b7d31daab36e4bc7dc">FloatingPoint</a> voxblox::ICP::voxel_size_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="icp_8h_source.html#l00223">223</a> of file <a class="el" href="icp_8h_source.html">icp.h</a>.</p>

</div>
</div>
<a id="ac4876528307eda3873bb1516a3f2b081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4876528307eda3873bb1516a3f2b081">&#9670;&nbsp;</a></span>voxel_size_inv_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacevoxblox.html#a69a49f8f7c4d44b7d31daab36e4bc7dc">FloatingPoint</a> voxblox::ICP::voxel_size_inv_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="icp_8h_source.html#l00224">224</a> of file <a class="el" href="icp_8h_source.html">icp.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="icp_8h_source.html">icp.h</a></li>
<li><a class="el" href="icp_8cc_source.html">icp.cc</a></li>
</ul>
</div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/voxblox">voxblox</a><br />
Author(s): Helen Oleynikova <helen.oleynikova@mavt.ethz.ch>, Marius Fehr <marius.fehr@mavt.ethz.ch></br />
<small>autogenerated on Tue Nov 13 2018 09:18:52</small>
</div>
</body>
</html>
